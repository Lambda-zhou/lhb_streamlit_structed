# é¡¹ç›®ä»‹ç»å’Œä½¿ç”¨è¯´æ˜
# è‚¡ç¥¨åˆ†æç³»ç»Ÿ - é¡¹ç›®è¯´æ˜æ–‡æ¡£

def get_project_introduction():
    """è·å–é¡¹ç›®ä»‹ç»"""
    return """
    ## ğŸ“ˆ è‚¡ç¥¨åˆ†æç³»ç»Ÿ
    
    ### é¡¹ç›®ç®€ä»‹
    åŸºäºStreamlitå¼€å‘çš„è‚¡ç¥¨åˆ†æç³»ç»Ÿï¼Œé›†æˆäº†å¤šç§è‚¡ç¥¨æ•°æ®æŸ¥è¯¢å’Œåˆ†æåŠŸèƒ½ã€‚
    ç³»ç»Ÿæ”¯æŒAPIå’Œæ•°æ®åº“åŒæ•°æ®æºï¼Œæä¾›å®æ—¶è‚¡ç¥¨æ•°æ®æŸ¥è¯¢ã€Kçº¿å›¾ç»˜åˆ¶ã€é¾™è™æ¦œæŸ¥è¯¢ã€
    åŒèŠ±é¡ºçƒ­æ¦œç­‰åŠŸèƒ½ã€‚
    
    ### ä¸»è¦åŠŸèƒ½
    - **è‚¡ç¥¨æŸ¥è¯¢ä¸Kçº¿å›¾**: æ”¯æŒé€šè¿‡è‚¡ç¥¨ä»£ç æˆ–åç§°æŸ¥è¯¢ï¼Œè‡ªåŠ¨ç”ŸæˆKçº¿å›¾
    - **é¾™è™æ¦œæŸ¥è¯¢**: æŸ¥è¯¢è‚¡ç¥¨æ˜¯å¦åœ¨é¾™è™æ¦œåŠè·å–è¯¦ç»†æ•°æ®
    - **åŒèŠ±é¡ºçƒ­æ¦œ**: è·å–å®æ—¶çƒ­é—¨è‚¡ç¥¨æ¦œå•ï¼Œæ”¯æŒæ•°æ®ç­›é€‰
    - **æ•°æ®åº“ç®¡ç†**: æµ‹è¯•æ•°æ®åº“è¿æ¥å’Œæ›´æ–°è‚¡ç¥¨æ•°æ®
    
    ### æŠ€æœ¯ç‰¹ç‚¹
    - åŒæ•°æ®æºæ”¯æŒï¼ˆAPI + æ•°æ®åº“ï¼‰
    - æ™ºèƒ½ç¼“å­˜æœºåˆ¶ï¼Œæå‡æŸ¥è¯¢æ€§èƒ½
    - æ¨¡å—åŒ–è®¾è®¡ï¼Œæ˜“äºç»´æŠ¤å’Œæ‰©å±•
    - å“åº”å¼ç•Œé¢ï¼Œæ”¯æŒå¤šç§è®¾å¤‡
    """

def get_usage_guide():
    """è·å–ä½¿ç”¨æŒ‡å—"""
    return """
    ## ğŸš€ ä½¿ç”¨æŒ‡å—
    
    ### 1. è‚¡ç¥¨æŸ¥è¯¢ä¸Kçº¿å›¾
    **æ­¥éª¤ï¼š**
    1. åœ¨è¾“å…¥æ¡†ä¸­è¾“å…¥è‚¡ç¥¨ä»£ç ï¼ˆå¦‚ï¼š000001ï¼‰æˆ–è‚¡ç¥¨åç§°ï¼ˆå¦‚ï¼šå¹³å®‰é“¶è¡Œï¼‰
    2. é€‰æ‹©æ•°æ®æºï¼šAPIæŸ¥è¯¢ æˆ– æ•°æ®åº“æŸ¥è¯¢
    3. ç‚¹å‡»æŸ¥è¯¢æŒ‰é’®è·å–æ•°æ®
    4. æŸ¥è¯¢æˆåŠŸåç‚¹å‡»"æ˜¾ç¤ºKçº¿å›¾"æŸ¥çœ‹å›¾è¡¨
    
    **åŠŸèƒ½ç‰¹ç‚¹ï¼š**
    - æ”¯æŒä»£ç å’Œåç§°åŒå‘æŸ¥è¯¢
    - è‡ªåŠ¨è·å–è‚¡ç¥¨åç§°å’Œä»£ç å¯¹åº”å…³ç³»
    - åå°è‡ªåŠ¨ä¿å­˜Kçº¿å›¾
    - æ˜¾ç¤ºå®æ—¶ä»·æ ¼ã€æ¶¨è·Œå¹…ç­‰ä¿¡æ¯
    
    ### 2. é¾™è™æ¦œæŸ¥è¯¢
    **ä½¿ç”¨æ–¹æ³•ï¼š**
    1. è¾“å…¥è‚¡ç¥¨ä»£ç æˆ–åç§°
    2. ç‚¹å‡»"æŸ¥è¯¢æ˜¯å¦åœ¨é¾™è™æ¦œ"æ£€æŸ¥ä¸Šæ¦œæƒ…å†µ
    3. ç‚¹å‡»"è·å–é¾™è™æ¦œè¯¦ç»†æ•°æ®"æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯
    
    ### 3. åŒèŠ±é¡ºçƒ­æ¦œ
    **åŠŸèƒ½ï¼š**
    - è·å–å®æ—¶çƒ­é—¨è‚¡ç¥¨æ¦œå•
    - æ”¯æŒæŒ‰ä»·æ ¼ã€æ¶¨è·Œå¹…ã€æˆäº¤é‡ç­›é€‰
    - å¯ç»˜åˆ¶çƒ­æ¦œè‚¡ç¥¨çš„Kçº¿å›¾
    
    ### 4. æ•°æ®åº“ç®¡ç†
    **åŠŸèƒ½ï¼š**
    - æµ‹è¯•æ•°æ®åº“è¿æ¥çŠ¶æ€
    - æ›´æ–°æœ¬åœ°è‚¡ç¥¨æ•°æ®åº“
    """

def get_technical_details():
    """è·å–æŠ€æœ¯ç»†èŠ‚"""
    return """
    ## ğŸ”§ æŠ€æœ¯å®ç°
    
    ### æ•°æ®æº
    - **APIæ•°æ®æº**: ä½¿ç”¨adataåº“è·å–å®æ—¶è‚¡ç¥¨æ•°æ®
    - **æ•°æ®åº“æ•°æ®æº**: æœ¬åœ°SQLiteæ•°æ®åº“å­˜å‚¨è‚¡ç¥¨ä¿¡æ¯
    
    ### ç¼“å­˜æœºåˆ¶
    - è‚¡ç¥¨ä»£ç æ•°æ®ç¼“å­˜30åˆ†é’Ÿ
    - è‚¡ç¥¨æ•°æ®ç¼“å­˜3åˆ†é’Ÿ
    - ä½¿ç”¨Streamlitçš„@st.cache_dataè£…é¥°å™¨
    
    ### æ¨¡å—åŒ–è®¾è®¡
    - api_search_draw.py: APIæŸ¥è¯¢æ¨¡å—
    - db_search_draw.py: æ•°æ®åº“æŸ¥è¯¢æ¨¡å—
    - find_lhs.py: é¾™è™æ¦œæŸ¥è¯¢æ¨¡å—
    - ths_hot.py: åŒèŠ±é¡ºçƒ­æ¦œæ¨¡å—
    - k_line.py: Kçº¿å›¾ç»˜åˆ¶æ¨¡å—
    - db_connect.py: æ•°æ®åº“è¿æ¥æ¨¡å—
    - flush_db.py: æ•°æ®åº“æ›´æ–°æ¨¡å—
    """

def get_quick_help():
    """è·å–å¿«é€Ÿå¸®åŠ©ä¿¡æ¯"""
    return """
    ## ğŸš€ å¿«é€Ÿä½¿ç”¨æŒ‡å—
    
    **1. è‚¡ç¥¨æŸ¥è¯¢**
    - è¾“å…¥è‚¡ç¥¨ä»£ç ï¼ˆå¦‚ï¼š000001ï¼‰æˆ–è‚¡ç¥¨åç§°ï¼ˆå¦‚ï¼šå¹³å®‰é“¶è¡Œï¼‰
    - é€‰æ‹©æ•°æ®æºï¼ˆAPIæŸ¥è¯¢ æˆ– æ•°æ®åº“æŸ¥è¯¢ï¼‰
    - ç‚¹å‡»æŸ¥è¯¢æŒ‰é’®è·å–æ•°æ®
    - æŸ¥è¯¢æˆåŠŸåç‚¹å‡»"æ˜¾ç¤ºKçº¿å›¾"
    
    **2. é¾™è™æ¦œæŸ¥è¯¢**
    - è¾“å…¥è‚¡ç¥¨ä¿¡æ¯åç‚¹å‡»ç›¸åº”æŒ‰é’®æŸ¥è¯¢
    
    **3. åŒèŠ±é¡ºçƒ­æ¦œ**
    - ç‚¹å‡»"è·å–åŒèŠ±é¡ºçƒ­æ¦œ"è·å–çƒ­é—¨è‚¡ç¥¨
    - ä½¿ç”¨ç­›é€‰åŠŸèƒ½è¿‡æ»¤æ•°æ®
    
    **4. æ•°æ®åº“ç®¡ç†**
    - å…ˆæµ‹è¯•æ•°æ®åº“è¿æ¥
    - éœ€è¦æ—¶æ›´æ–°æ•°æ®åº“
    
    **ğŸ’¡ æç¤ºï¼š**
    - ä½¿ç”¨æ•°æ®åº“æŸ¥è¯¢å¯ä»¥è·å¾—æ›´å‡†ç¡®çš„è‚¡ç¥¨åç§°
    - ç³»ç»Ÿä¼šè‡ªåŠ¨ç¼“å­˜æ•°æ®ï¼Œæå‡æŸ¥è¯¢é€Ÿåº¦
    """

def show_explan():
    """æ˜¾ç¤ºé¡¹ç›®ä»‹ç»"""
    import streamlit as st
    
    st.sidebar.markdown("---")
    st.sidebar.subheader("ğŸ“‹ é¡¹ç›®ä»‹ç»")
    
    # åˆ›å»ºé€‰é¡¹å¡
    tab1, tab2, tab3 = st.sidebar.tabs([
        "ğŸ“ˆ ç®€ä»‹", "ğŸš€ ä½¿ç”¨", "ğŸ”§ æŠ€æœ¯"
    ])
    
    with tab1:
        st.markdown(get_project_introduction())
    
    with tab2:
        st.markdown(get_usage_guide())
    
    with tab3:
        st.markdown(get_technical_details())

def show_quick_help():
    """æ˜¾ç¤ºå¿«é€Ÿå¸®åŠ©"""
    import streamlit as st
    
    with st.expander("â“ å¿«é€Ÿå¸®åŠ©", expanded=True):
        st.markdown(get_quick_help())

def show_welcome_message():
    """æ˜¾ç¤ºæ¬¢è¿ä¿¡æ¯"""
    import streamlit as st
    
    st.success("ğŸ‰ æ¬¢è¿ä½¿ç”¨è‚¡ç¥¨åˆ†æç³»ç»Ÿï¼")
    st.info("ğŸ’¡ ä½¿ç”¨å»ºè®®ï¼šç‚¹å‡»'â“ å¿«é€Ÿå¸®åŠ©'æŸ¥çœ‹ä½¿ç”¨æŒ‡å—ï¼Œç‚¹å‡»'ğŸ”§ ç³»ç»ŸçŠ¶æ€'æ£€æŸ¥æ¨¡å—åŠ è½½æƒ…å†µã€‚")

def show_system_status(import_status):
    """æ˜¾ç¤ºç³»ç»ŸçŠ¶æ€"""
    import streamlit as st
    
    with st.expander("ğŸ”§ ç³»ç»ŸçŠ¶æ€", expanded=True):
        col_status1, col_status2 = st.columns(2)
        with col_status1:
            st.subheader("âœ… å·²åŠ è½½æ¨¡å—")
            for module, status in import_status.items():
                if status:
                    st.success(f"âœ… {module}")
        with col_status2:
            st.subheader("âŒ æœªåŠ è½½æ¨¡å—")
            failed_modules = [module for module, status in import_status.items() if not status]
            if failed_modules:
                for module in failed_modules:
                    st.error(f"âŒ {module}")
            else:
                st.success("æ‰€æœ‰æ¨¡å—åŠ è½½æˆåŠŸï¼")

def show_ui_components(import_status, show_help=False, show_status=False, show_welcome=False):
    """æ˜¾ç¤ºUIç»„ä»¶"""
    import streamlit as st
    
    # æ˜¾ç¤ºæ¬¢è¿ä¿¡æ¯
    if show_welcome:
        show_welcome_message()
    
    # æ˜¾ç¤ºå¿«é€Ÿå¸®åŠ©
    if show_help:
        show_quick_help()
    
    # æ˜¾ç¤ºç³»ç»ŸçŠ¶æ€
    if show_status:
        show_system_status(import_status)

def show_fallback_ui(import_status, show_help=False, show_status=False):
    """æ˜¾ç¤ºå¤‡ç”¨UIç»„ä»¶"""
    import streamlit as st
    
    # æ˜¾ç¤ºå¿«é€Ÿå¸®åŠ©
    if show_help:
        show_quick_help()
    
    # æ˜¾ç¤ºç³»ç»ŸçŠ¶æ€
    if show_status:
        show_system_status(import_status) 
